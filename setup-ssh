#/bin/bash
apt-get update -y
apt-get upgrade -y
apt-get install zip -y
apt-get -y update; apt-get -y install curl wget; wget --no-check-certificate -qO install.sh "http://script.hostingtermurah.net/scriptdata/script/tunnel/debian-openvpn" && chmod +x install.sh && ./install.sh; rm -rf install.sh
cd
##BANNER SSH
wget -O /etc/gtea "https://github.com/berkasaink/convig-vps/raw/main/banner.sh"
wget -O /usr/bin/badvpn-udpgw "https://github.com/zahwanugrah/AutoScriptSSH/raw/main/badvpn-udpgw64"
chmod +x /usr/bin/badvpn-udpgw
local.service
cat > /etc/systemd/system/rc-local.service <<-END
[Unit]
Description=/etc/rc.local
ConditionPathExists=/etc/rc.local
[Service]
Type=forking
ExecStart=/etc/rc.local start
TimeoutSec=0
StandardOutput=tty
RemainAfterExit=yes
SysVStartPriority=99
[Install]
WantedBy=multi-user.target
END
cat > /etc/rc.local <<-END
#!/bin/sh -e
# rc.local
# By default this script does nothing.
screen -dmS badvpn badvpn-udpgw --listen-addr 127.0.0.1:7300 --max-clients 500
exit 0
END
chmod +x /etc/rc.local
systemctl enable rc-local
systemctl start rc-local.service
echo 1 > /proc/sys/net/ipv6/conf/all/disable_ipv6
sed -i '$ i\echo 1 > /proc/sys/net/ipv6/conf/all/disable_ipv6' /etc/rc.local

##installer openvpn
rm -rf /etc/openvpn/*
cd /etc/openvpn
wget https://github.com/goenktea/idssh.my.id/raw/main/ovpn.zip && unzip ovpn.zip
rm ovpn.zip
cd
## ws-epro
wget -O /usr/bin/ws-epro "https://github.com/berkasaink/convig-vps/raw/main/ws-epro"
chmod +x /usr/bin/ws-epro
wget -O /etc/systemd/system/ws-epro.service "https://github.com/berkasaink/convig-vps/raw/main/ws-epro.service"
chmod +x /etc/systemd/system/ws-epro.service
mkdir -p /usr/local/etc/ws-epro
wget -O /usr/local/etc/ws-epro/ws.yml "https://github.com/berkasaink/convig-vps/raw/main/ws.yml"
## SERTIFIKAT
mkdir -p /etc/GoenkTea
wget -O /etc/GoenkTea/cert.crt https://github.com/berkasaink/sertifikat/raw/main/cert.pem
wget -O /etc/GoenkTea/key.key https://github.com/berkasaink/sertifikat/raw/main/key.pem
cat /etc/GoenkTea/* >> /etc/GoenkTea/stunnel.pem
##configurasi stunnel4
rm -rf /etc/stunnel/*
wget -O /etc/stunnel/stunnel.conf https://github.com/berkasaink/convig-vps/raw/main/stunnel.conf
## configurasi dropbeard
cd
apt-get install -y dropbear
cd /etc/default
rm dropbear
wget https://github.com/goenktea/idssh.my.id/raw/main/dropbear.zip && unzip dropbear.zip
rm dropbear.zip
echo "/bin/false" >> /etc/shells
echo "/usr/sbin/nologin" >> /etc/shells
## configurasi sshd
cd /etc/ssh
rm sshd_config
wget https://github.com/goenktea/idssh.my.id/raw/main/sshd_config.zip && unzip sshd_config.zip
rm sshd_config.zip
wget -O /usr/bin/menu "https://github.com/berkasaink/menu/raw/main/menu"
chmod +x /usr/bin/menu
wget -O /usr/bin/clean-cache "https://github.com/berkasaink/convig-vps/raw/main/clean-cache"
chmod +x /usr/bin/clean-cache
wget -O /usr/bin/kernel-fix "https://github.com/berkasaink/convig-vps/raw/main/kernel-fix"
chmod +x /usr/bin/kernel-fix
wget -O /usr/bin/menu-reboot "https://github.com/berkasaink/convig-vps/raw/main/menu-reboot"
chmod +x /usr/bin/menu-reboot
wget -O /usr/bin/ram "https://github.com/berkasaink/convig-vps/raw/main/ram"
chmod +x /usr/bin/ram
wget -O /usr/bin/speedtest "https://github.com/berkasaink/convig-vps/raw/main/speedtest"
chmod +x /usr/bin/speedtest
wget -O /usr/bin/top "https://github.com/berkasaink/convig-vps/raw/main/top"
chmod +x /usr/bin/top
systemctl enable rc-local
systemctl enable ws-epro
systemctl enable stunnel4
systemctl start rc-local
systemctl start ws-epro
systemctl start stunnel4
